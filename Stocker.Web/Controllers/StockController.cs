using Microsoft.AspNetCore.Mvc;
using Newtonsoft.Json;
using System.Threading.Tasks;
using YahooFinance.Connect.Interfaces;
using YahooFinance.Connect.Models;

namespace Stocker.Web.Controllers
{
    [ApiController]
    [Route("[controller]")]
    public class StockController : Controller
    {
        private readonly IYahooFinanceClient _yahooFinanceClient;

        public StockController(IYahooFinanceClient yahooFinanceClient)
        {
            _yahooFinanceClient = yahooFinanceClient;
        }

        [HttpGet("{name}")]
        public async Task<IActionResult> GetStock(string name)
        {
            //var result = await _yahooFinanceClient.GetDailyAsync(name);

            var result = @" {
            ""symbol"": ""GME"",
            ""currency"": ""USD"",
            ""exchangeName"": ""NYQ"",
            ""instrumentType"": ""EQUITY"",
            ""firstTradeDate"": ""2002-02-13T14:30:00"",
            ""regularMarketTime"": ""2021-03-17T20:00:02"",
            ""gmtOffset"": -14400,
            ""timeZone"": ""EDT"",
            ""exchangeTimeZoneName"": ""America/New_York"",
            ""regularMarketPrice"": 209.81,
            ""chartPreviousClose"": 15.69,
            ""priceHint"": 2,
            ""currentTradingPeriod"": {
                ""pre"": {
                    ""timeZone"": ""EDT"",
                    ""start"": ""2021-03-17T08:00:00"",
                    ""gmtOffset"": -14400
                },
                ""regular"": {
                    ""timeZone"": ""EDT"",
                    ""start"": ""2021-03-17T13:30:00"",
                    ""gmtOffset"": -14400
                },
                ""post"": {
                    ""timeZone"": ""EDT"",
                    ""start"": ""2021-03-17T20:00:00"",
                    ""gmtOffset"": -14400
                }
            },
            ""dataGranularity"": 0,
            ""range"": 8,
            ""validRanges"": [
                1,
                2,
                0,
                0,
                0,
                6,
                7,
                8,
                9,
                10,
                11
            ],
            ""lines"": [
                {
                    ""timeStamp"": ""2016-04-01T04:00:00"",
                    ""low"": 29,
                    ""high"": 33.720001220703125,
                    ""open"": 31.729999542236328,
                    ""close"": 32.79999923706055,
                    ""volume"": 66957500,
                    ""adjustedClosingPrice"": 25.603662490844727
                },
                {
                    ""timeStamp"": ""2016-05-01T04:00:00"",
                    ""low"": 27.520000457763672,
                    ""high"": 32.86000061035156,
                    ""open"": 32.810001373291016,
                    ""close"": 29.100000381469727,
                    ""volume"": 70071200,
                    ""adjustedClosingPrice"": 22.715444564819336
                },
                {
                    ""timeStamp"": ""2016-06-01T04:00:00"",
                    ""low"": 25.18000030517578,
                    ""high"": 29.31999969482422,
                    ""open"": 29.020000457763672,
                    ""close"": 26.579999923706055,
                    ""volume"": 54733100,
                    ""adjustedClosingPrice"": 20.748336791992188
                },
                {
                    ""timeStamp"": ""2016-07-01T04:00:00"",
                    ""low"": 25.729999542236328,
                    ""high"": 31.850000381469727,
                    ""open"": 26.8799991607666,
                    ""close"": 30.950000762939453,
                    ""volume"": 58500900,
                    ""adjustedClosingPrice"": 24.475868225097656
                },
                {
                    ""timeStamp"": ""2016-08-01T04:00:00"",
                    ""low"": 28.270000457763672,
                    ""high"": 32.66999816894531,
                    ""open"": 30.969999313354492,
                    ""close"": 28.389999389648438,
                    ""volume"": 69658400,
                    ""adjustedClosingPrice"": 22.45136833190918
                },
                {
                    ""timeStamp"": ""2016-09-01T04:00:00"",
                    ""low"": 26.690000534057617,
                    ""high"": 28.670000076293945,
                    ""open"": 28.469999313354492,
                    ""close"": 27.59000015258789,
                    ""volume"": 41148800,
                    ""adjustedClosingPrice"": 21.818714141845703
                },
                {
                    ""timeStamp"": ""2016-10-01T04:00:00"",
                    ""low"": 23.690000534057617,
                    ""high"": 27.860000610351562,
                    ""open"": 27.59000015258789,
                    ""close"": 24.049999237060547,
                    ""volume"": 51545000,
                    ""adjustedClosingPrice"": 19.270538330078125
                },
                {
                    ""timeStamp"": ""2016-11-01T04:00:00"",
                    ""low"": 20.100000381469727,
                    ""high"": 26.489999771118164,
                    ""open"": 24.010000228881836,
                    ""close"": 24.690000534057617,
                    ""volume"": 70835700,
                    ""adjustedClosingPrice"": 19.783349990844727
                },
                {
                    ""timeStamp"": ""2016-12-01T05:00:00"",
                    ""low"": 24.1299991607666,
                    ""high"": 26.850000381469727,
                    ""open"": 24.65999984741211,
                    ""close"": 25.260000228881836,
                    ""volume"": 42751600,
                    ""adjustedClosingPrice"": 20.542285919189453
                },
                {
                    ""timeStamp"": ""2017-01-01T05:00:00"",
                    ""low"": 22.270000457763672,
                    ""high"": 26.049999237060547,
                    ""open"": 25.440000534057617,
                    ""close"": 24.489999771118164,
                    ""volume"": 61272600,
                    ""adjustedClosingPrice"": 19.916095733642578
                },
                {
                    ""timeStamp"": ""2017-02-01T05:00:00"",
                    ""low"": 23.56999969482422,
                    ""high"": 26.68000030517578,
                    ""open"": 24.489999771118164,
                    ""close"": 24.440000534057617,
                    ""volume"": 40738100,
                    ""adjustedClosingPrice"": 19.875436782836914
                },
                {
                    ""timeStamp"": ""2017-03-01T05:00:00"",
                    ""low"": 20.239999771118164,
                    ""high"": 25.31999969482422,
                    ""open"": 24.56999969482422,
                    ""close"": 22.549999237060547,
                    ""volume"": 86583400,
                    ""adjustedClosingPrice"": 18.338424682617188
                },
                {
                    ""timeStamp"": ""2017-04-01T04:00:00"",
                    ""low"": 21.559999465942383,
                    ""high"": 23.979999542236328,
                    ""open"": 22.520000457763672,
                    ""close"": 22.690000534057617,
                    ""volume"": 48114500,
                    ""adjustedClosingPrice"": 18.73708152770996
                },
                {
                    ""timeStamp"": ""2017-05-01T04:00:00"",
                    ""low"": 21.25,
                    ""high"": 25.309999465942383,
                    ""open"": 22.770000457763672,
                    ""close"": 22.139999389648438,
                    ""volume"": 76113200,
                    ""adjustedClosingPrice"": 18.28289794921875
                },
                {
                    ""timeStamp"": ""2017-06-01T04:00:00"",
                    ""low"": 20.260000228881836,
                    ""high"": 22.959999084472656,
                    ""open"": 22.149999618530273,
                    ""close"": 21.610000610351562,
                    ""volume"": 55700500,
                    ""adjustedClosingPrice"": 17.845230102539062
                },
                {
                    ""timeStamp"": ""2017-07-01T04:00:00"",
                    ""low"": 20.649999618530273,
                    ""high"": 22,
                    ""open"": 21.770000457763672,
                    ""close"": 21.690000534057617,
                    ""volume"": 35477000,
                    ""adjustedClosingPrice"": 18.21664810180664
                },
                {
                    ""timeStamp"": ""2017-08-01T04:00:00"",
                    ""low"": 18.469999313354492,
                    ""high"": 22.3700008392334,
                    ""open"": 21.690000534057617,
                    ""close"": 18.5,
                    ""volume"": 71639100,
                    ""adjustedClosingPrice"": 15.537482261657715
                },
                {
                    ""timeStamp"": ""2017-09-01T04:00:00"",
                    ""low"": 18.559999465942383,
                    ""high"": 20.969999313354492,
                    ""open"": 18.600000381469727,
                    ""close"": 20.65999984741211,
                    ""volume"": 40379400,
                    ""adjustedClosingPrice"": 17.351587295532227
                },
                {
                    ""timeStamp"": ""2017-10-01T04:00:00"",
                    ""low"": 18.59000015258789,
                    ""high"": 20.68000030517578,
                    ""open"": 20.649999618530273,
                    ""close"": 18.690000534057617,
                    ""volume"": 38113700,
                    ""adjustedClosingPrice"": 16.01165771484375
                },
                {
                    ""timeStamp"": ""2017-11-01T04:00:00"",
                    ""low"": 15.850000381469727,
                    ""high"": 19.690000534057617,
                    ""open"": 18.670000076293945,
                    ""close"": 18.75,
                    ""volume"": 106949300,
                    ""adjustedClosingPrice"": 16.06306266784668
                },
                {
                    ""timeStamp"": ""2017-12-01T05:00:00"",
                    ""low"": 17.940000534057617,
                    ""high"": 19.860000610351562,
                    ""open"": 18.729999542236328,
                    ""close"": 17.950000762939453,
                    ""volume"": 57876300,
                    ""adjustedClosingPrice"": 15.683008193969727
                },
                {
                    ""timeStamp"": ""2018-01-01T05:00:00"",
                    ""low"": 16.610000610351562,
                    ""high"": 20.309999465942383,
                    ""open"": 17.959999084472656,
                    ""close"": 16.809999465942383,
                    ""volume"": 89774500,
                    ""adjustedClosingPrice"": 14.686983108520508
                },
                {
                    ""timeStamp"": ""2018-02-01T05:00:00"",
                    ""low"": 15.100000381469727,
                    ""high"": 17.010000228881836,
                    ""open"": 16.700000762939453,
                    ""close"": 15.6899995803833,
                    ""volume"": 65241500,
                    ""adjustedClosingPrice"": 13.708433151245117
                },
                {
                    ""timeStamp"": ""2018-03-01T05:00:00"",
                    ""low"": 12.199999809265137,
                    ""high"": 16.229999542236328,
                    ""open"": 15.789999961853027,
                    ""close"": 12.619999885559082,
                    ""volume"": 103280400,
                    ""adjustedClosingPrice"": 11.026158332824707
                },
                {
                    ""timeStamp"": ""2018-04-01T04:00:00"",
                    ""low"": 12.5,
                    ""high"": 14.180000305175781,
                    ""open"": 12.510000228881836,
                    ""close"": 13.649999618530273,
                    ""volume"": 94335400,
                    ""adjustedClosingPrice"": 12.216769218444824
                },
                {
                    ""timeStamp"": ""2018-05-01T04:00:00"",
                    ""low"": 12.260000228881836,
                    ""high"": 13.890000343322754,
                    ""open"": 13.579999923706055,
                    ""close"": 13.199999809265137,
                    ""volume"": 98517700,
                    ""adjustedClosingPrice"": 11.814017295837402
                },
                {
                    ""timeStamp"": ""2018-06-01T04:00:00"",
                    ""low"": 12.699999809265137,
                    ""high"": 15.979999542236328,
                    ""open"": 12.800000190734863,
                    ""close"": 14.569999694824219,
                    ""volume"": 154989300,
                    ""adjustedClosingPrice"": 13.040169715881348
                },
                {
                    ""timeStamp"": ""2018-07-01T04:00:00"",
                    ""low"": 14,
                    ""high"": 15.630000114440918,
                    ""open"": 14.59000015258789,
                    ""close"": 14.40999984741211,
                    ""volume"": 52105500,
                    ""adjustedClosingPrice"": 13.243318557739258
                },
                {
                    ""timeStamp"": ""2018-08-01T04:00:00"",
                    ""low"": 13.180000305175781,
                    ""high"": 17.270000457763672,
                    ""open"": 14.420000076293945,
                    ""close"": 13.270000457763672,
                    ""volume"": 84426000,
                    ""adjustedClosingPrice"": 12.19561767578125
                },
                {
                    ""timeStamp"": ""2018-09-01T04:00:00"",
                    ""low"": 13.079999923706055,
                    ""high"": 17.040000915527344,
                    ""open"": 13.170000076293945,
                    ""close"": 15.270000457763672,
                    ""volume"": 75143300,
                    ""adjustedClosingPrice"": 14.03369140625
                },
                {
                    ""timeStamp"": ""2018-10-01T04:00:00"",
                    ""low"": 13.640000343322754,
                    ""high"": 15.600000381469727,
                    ""open"": 15.279999732971191,
                    ""close"": 14.600000381469727,
                    ""volume"": 52300700,
                    ""adjustedClosingPrice"": 13.72865104675293
                },
                {
                    ""timeStamp"": ""2018-11-01T04:00:00"",
                    ""low"": 12.140000343322754,
                    ""high"": 15.760000228881836,
                    ""open"": 14.609999656677246,
                    ""close"": 13.65999984741211,
                    ""volume"": 84572300,
                    ""adjustedClosingPrice"": 12.84475040435791
                },
                {
                    ""timeStamp"": ""2018-12-01T05:00:00"",
                    ""low"": 11.5600004196167,
                    ""high"": 14.109999656677246,
                    ""open"": 13.819999694824219,
                    ""close"": 12.619999885559082,
                    ""volume"": 50159500,
                    ""adjustedClosingPrice"": 11.866820335388184
                },
                {
                    ""timeStamp"": ""2019-01-01T05:00:00"",
                    ""low"": 11.100000381469727,
                    ""high"": 16.899999618530273,
                    ""open"": 12.449999809265137,
                    ""close"": 11.34000015258789,
                    ""volume"": 107231700,
                    ""adjustedClosingPrice"": 10.967875480651855
                },
                {
                    ""timeStamp"": ""2019-02-01T05:00:00"",
                    ""low"": 11,
                    ""high"": 11.930000305175781,
                    ""open"": 11.3100004196167,
                    ""close"": 11.699999809265137,
                    ""volume"": 54706400,
                    ""adjustedClosingPrice"": 11.316061973571777
                },
                {
                    ""timeStamp"": ""2019-03-01T05:00:00"",
                    ""low"": 10.069999694824219,
                    ""high"": 12.100000381469727,
                    ""open"": 11.880000114440918,
                    ""close"": 10.15999984741211,
                    ""volume"": 67208800,
                    ""adjustedClosingPrice"": 9.826597213745117
                },
                {
                    ""timeStamp"": ""2019-04-01T04:00:00"",
                    ""low"": 8.529999732971191,
                    ""high"": 10.420000076293945,
                    ""open"": 10.289999961853027,
                    ""close"": 8.649999618530273,
                    ""volume"": 114515000,
                    ""adjustedClosingPrice"": 8.649999618530273
                },
                {
                    ""timeStamp"": ""2019-05-01T04:00:00"",
                    ""low"": 7.320000171661377,
                    ""high"": 8.989999771118164,
                    ""open"": 8.65999984741211,
                    ""close"": 7.579999923706055,
                    ""volume"": 67421700,
                    ""adjustedClosingPrice"": 7.579999923706055
                },
                {
                    ""timeStamp"": ""2019-06-01T04:00:00"",
                    ""low"": 4.710000038146973,
                    ""high"": 7.849999904632568,
                    ""open"": 7.579999923706055,
                    ""close"": 5.46999979019165,
                    ""volume"": 170303900,
                    ""adjustedClosingPrice"": 5.46999979019165
                },
                {
                    ""timeStamp"": ""2019-07-01T04:00:00"",
                    ""low"": 3.9000000953674316,
                    ""high"": 5.639999866485596,
                    ""open"": 5.53000020980835,
                    ""close"": 4.019999980926514,
                    ""volume"": 154982200,
                    ""adjustedClosingPrice"": 4.019999980926514
                },
                {
                    ""timeStamp"": ""2019-08-01T04:00:00"",
                    ""low"": 3.1500000953674316,
                    ""high"": 4.360000133514404,
                    ""open"": 4.019999980926514,
                    ""close"": 3.9700000286102295,
                    ""volume"": 150910000,
                    ""adjustedClosingPrice"": 3.9700000286102295
                },
                {
                    ""timeStamp"": ""2019-09-01T04:00:00"",
                    ""low"": 3.6600000858306885,
                    ""high"": 5.639999866485596,
                    ""open"": 3.9700000286102295,
                    ""close"": 5.519999980926514,
                    ""volume"": 209391900,
                    ""adjustedClosingPrice"": 5.519999980926514
                },
                {
                    ""timeStamp"": ""2019-10-01T04:00:00"",
                    ""low"": 4.960000038146973,
                    ""high"": 6.619999885559082,
                    ""open"": 5.639999866485596,
                    ""close"": 5.440000057220459,
                    ""volume"": 105171700,
                    ""adjustedClosingPrice"": 5.440000057220459
                },
                {
                    ""timeStamp"": ""2019-11-01T04:00:00"",
                    ""low"": 5.349999904632568,
                    ""high"": 6.389999866485596,
                    ""open"": 5.449999809265137,
                    ""close"": 6.340000152587891,
                    ""volume"": 56925700,
                    ""adjustedClosingPrice"": 6.340000152587891
                },
                {
                    ""timeStamp"": ""2019-12-01T05:00:00"",
                    ""low"": 5.179999828338623,
                    ""high"": 6.920000076293945,
                    ""open"": 6.349999904632568,
                    ""close"": 6.079999923706055,
                    ""volume"": 121013800,
                    ""adjustedClosingPrice"": 6.079999923706055
                },
                {
                    ""timeStamp"": ""2020-01-01T05:00:00"",
                    ""low"": 3.8299999237060547,
                    ""high"": 6.46999979019165,
                    ""open"": 6.139999866485596,
                    ""close"": 3.8399999141693115,
                    ""volume"": 81070500,
                    ""adjustedClosingPrice"": 3.8399999141693115
                },
                {
                    ""timeStamp"": ""2020-02-01T05:00:00"",
                    ""low"": 3.180000066757202,
                    ""high"": 4.510000228881836,
                    ""open"": 3.880000114440918,
                    ""close"": 3.5999999046325684,
                    ""volume"": 55790000,
                    ""adjustedClosingPrice"": 3.5999999046325684
                },
                {
                    ""timeStamp"": ""2020-03-01T05:00:00"",
                    ""low"": 3.390000104904175,
                    ""high"": 5.090000152587891,
                    ""open"": 3.5999999046325684,
                    ""close"": 3.5,
                    ""volume"": 100476400,
                    ""adjustedClosingPrice"": 3.5
                },
                {
                    ""timeStamp"": ""2020-04-01T04:00:00"",
                    ""low"": 2.569999933242798,
                    ""high"": 6.46999979019165,
                    ""open"": 3.450000047683716,
                    ""close"": 5.730000019073486,
                    ""volume"": 99735200,
                    ""adjustedClosingPrice"": 5.730000019073486
                },
                {
                    ""timeStamp"": ""2020-05-01T04:00:00"",
                    ""low"": 3.9600000381469727,
                    ""high"": 6.179999828338623,
                    ""open"": 5.650000095367432,
                    ""close"": 4.059999942779541,
                    ""volume"": 53528000,
                    ""adjustedClosingPrice"": 4.059999942779541
                },
                {
                    ""timeStamp"": ""2020-06-01T04:00:00"",
                    ""low"": 4.019999980926514,
                    ""high"": 5.53000020980835,
                    ""open"": 4.119999885559082,
                    ""close"": 4.340000152587891,
                    ""volume"": 100281700,
                    ""adjustedClosingPrice"": 4.340000152587891
                },
                {
                    ""timeStamp"": ""2020-07-01T04:00:00"",
                    ""low"": 3.7699999809265137,
                    ""high"": 4.550000190734863,
                    ""open"": 4.309999942779541,
                    ""close"": 4.010000228881836,
                    ""volume"": 55497200,
                    ""adjustedClosingPrice"": 4.010000228881836
                },
                {
                    ""timeStamp"": ""2020-08-01T04:00:00"",
                    ""low"": 4,
                    ""high"": 7.150000095367432,
                    ""open"": 4.03000020980835,
                    ""close"": 6.679999828338623,
                    ""volume"": 117270800,
                    ""adjustedClosingPrice"": 6.679999828338623
                },
                {
                    ""timeStamp"": ""2020-09-01T04:00:00"",
                    ""low"": 5.869999885559082,
                    ""high"": 11.170000076293945,
                    ""open"": 7.300000190734863,
                    ""close"": 10.199999809265137,
                    ""volume"": 254864200,
                    ""adjustedClosingPrice"": 10.199999809265137
                },
                {
                    ""timeStamp"": ""2020-10-01T04:00:00"",
                    ""low"": 9.100000381469727,
                    ""high"": 15.869999885559082,
                    ""open"": 10.09000015258789,
                    ""close"": 10.470000267028809,
                    ""volume"": 359871700,
                    ""adjustedClosingPrice"": 10.470000267028809
                },
                {
                    ""timeStamp"": ""2020-11-01T04:00:00"",
                    ""low"": 10.5,
                    ""high"": 19.420000076293945,
                    ""open"": 10.819999694824219,
                    ""close"": 16.559999465942383,
                    ""volume"": 161490800,
                    ""adjustedClosingPrice"": 16.559999465942383
                },
                {
                    ""timeStamp"": ""2020-12-01T05:00:00"",
                    ""low"": 12.140000343322754,
                    ""high"": 22.350000381469727,
                    ""open"": 17.110000610351562,
                    ""close"": 18.84000015258789,
                    ""volume"": 251301800,
                    ""adjustedClosingPrice"": 18.84000015258789
                },
                {
                    ""timeStamp"": ""2021-01-01T05:00:00"",
                    ""low"": 17.079999923706055,
                    ""high"": 483,
                    ""open"": 19,
                    ""close"": 325,
                    ""volume"": 1262090400,
                    ""adjustedClosingPrice"": 325
                },
                {
                    ""timeStamp"": ""2021-02-01T05:00:00"",
                    ""low"": 38.5,
                    ""high"": 322,
                    ""open"": 316.55999755859375,
                    ""close"": 101.73999786376953,
                    ""volume"": 826663500,
                    ""adjustedClosingPrice"": 101.73999786376953
                },
                {
                    ""timeStamp"": ""2021-03-01T05:00:00"",
                    ""low"": 99.97000122070312,
                    ""high"": 348.5,
                    ""open"": 104.54000091552734,
                    ""close"": 208.1699981689453,
                    ""volume"": 452346700,
                    ""adjustedClosingPrice"": 208.1699981689453
                },
                {
                    ""timeStamp"": ""2021-03-17T20:00:02"",
                    ""low"": 204,
                    ""high"": 231.47000122070312,
                    ""open"": 217.83999633789062,
                    ""close"": 209.80999755859375,
                    ""volume"": 16123963,
                    ""adjustedClosingPrice"": 209.80999755859375
                }
            ],
            ""error"": null
        }";

            return Content(result);
        }
    }
}
